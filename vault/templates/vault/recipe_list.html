{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
  <h1>Recipes</h1>
  {% if user.is_authenticated %}
    <a class="btn btn-dark" href="{% url 'vault:recipe_create' %}">New Recipe</a>
  {% endif %}
</div>

<form class="row g-2 my-3" method="get">
  <div class="col-sm-10">
    <input class="form-control" name="q" value="{{ q }}" placeholder="Search recipes…" />
  </div>
  <div class="col-sm-2 d-grid">
    <button class="btn btn-outline-dark">Search</button>
  </div>
</form>

<div class="list-group">
  {% for r in recipes %}
    <a class="list-group-item list-group-item-action" href="{% url 'vault:recipe_detail' r.pk %}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ r.title }}</strong>
          {% if r.is_premium %}<span class="badge-premium ms-2">Premium</span>{% endif %}
          <div class="small text-muted">Servings: {{ r.servings }} • {{ r.created_at|date:"Y-m-d" }}</div>
        </div>
        {% if user.is_authenticated and r.owner_id == user.id %}
          <span class="small text-muted">yours</span>
        {% endif %}
      </div>
    </a>
  {% empty %}
    <div class="alert alert-info">No recipes found.</div>
  {% endfor %}
</div>
{% endblock %}
